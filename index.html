<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vasta</title>
    <style>
        /* Reset e stile base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: #e6e6e6;
            line-height: 1.6;
            height: 100%;
            overflow-x: hidden;
        }
        
        /* Contenitore principale */
        #game-container {
            max-width: 800px;
            min-height: 100vh;
            margin: 0 auto;
            padding: 2rem;
            background-color: #222;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            position: relative;
        }
        
        /* Stile degli header */
        h1 {
            color: #3498db;
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }
        
        h2 {
            color: #e74c3c;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }
        
        /* Paragrafi */
        p {
            margin-bottom: 1.2rem;
            font-size: 1.1rem;
        }
        
        /* Contenitore dei link/scelte */
        #choices-container {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        /* Stile dei bottoni di scelta */
        .choice-button {
            display: inline-block;
            padding: 0.8rem 1.2rem;
            background-color: #2c3e50;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
        }
        
        .choice-button:hover {
            background-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Stile per il footer */
        footer {
            margin-top: 3rem;
            font-size: 0.9rem;
            text-align: center;
            color: #666;
        }
        
        /* Animazione di transizione */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        #passage-content {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        /* Stile per finali specifici */
        .finale-positivo {
            color: #2ecc71;
        }
        
        .finale-intermedio {
            color: #f39c12;
        }
        
        .finale-cattivo {
            color: #e74c3c;
        }
        
        /* Nasconde gli elementi di Twine dal DOM */
        tw-storydata, tw-passagedata {
            display: none !important;
        }
        
        /* Transizione tra passaggi */
        .passage-transition {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .passage-visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="passage-content" class="passage-transition"></div>
        <div id="choices-container"></div>
        <footer>
            Vasta - Un gioco interattivo sulla responsabilità etica
        </footer>
    </div>
    
    <script>
        // Definizione della storia
        const story = {
            passages: {
                "Inizio": {
                    content: `
                        <h1>VASTA</h1>
                        <p>Da tempo sogni una carriera internazionale. Dopo anni di studio in ingegneria civile e un master in gestione di progetti infrastrutturali, finalmente ricevi l'offerta che aspettavi: un contratto con VASTA, la multinazionale leader nella costruzione di grandi opere idrauliche.</p>
                        <p>La sede centrale è a Madrid e il ruolo che ti propongono promette sfide ambiziose e una vita che hai solo immaginato fino ad ora.</p>
                        <p>Mentre osservi il contratto sul tavolo, la mente corre indietro agli anni che hanno forgiato i tuoi sogni.</p>
                        <p>Cosa ti ha spinto, davvero, a inseguire questa carriera?</p>
                    `,
                    choices: [
                        { text: "Volevo superare i miei limiti e provare a me stesso di esserne capace.", target: "SceltaLimiti", etica: 0 },
                        { text: "Ho sempre sognato di costruire opere che durassero per generazioni.", target: "SceltaOpere", etica: 0 }
                    ]
                },
                "SceltaLimiti": {
                    content: `
                        <p>Ricordi bene i sacrifici fatti per arrivare fin qui: gli esami, le notti insonni, i momenti in cui tutto sembrava troppo grande per te.</p>
                        <p>Non hai mai cercato solo un lavoro. Hai cercato una prova. La possibilità di dimostrare — prima di tutto a te stesso — che puoi affrontare sfide immense e uscirne più forte.</p>
                        <p>E adesso, ti arriva una nuova prova.</p>
                        <p>Dopo mesi di lavoro e impegno, VASTA ti chiede di trasferirti per 2 anni in Guinea, per supervisionare la costruzione di un'importante diga.</p>
                        <p>È il momento di mettere in pratica tutto ciò che hai imparato. La sfida è grande, ma la voglia di farcela è più forte che mai.</p>
                    `,
                    choices: [
                        { text: "Sei molto entusiasta dell'opportunità e accetti immediatamente la proposta", target: "ArrivoABafata", etica: 0 },
                        { text: "Sorgono i primi dubbi, ma dopo un periodo di riflessione decidi di accettare", target: "ArrivoABafata", etica: 0 }
                    ]
                },
                "SceltaOpere": {
                    content: `
                        <p>Ricordi bene i sacrifici fatti per arrivare fin qui: gli esami, le notti insonni, i momenti in cui tutto sembrava troppo grande per te.</p>
                        <p>Non hai mai cercato solo un lavoro. Hai cercato una prova. La possibilità di dimostrare — prima di tutto a te stesso — che puoi affrontare sfide immense e uscirne più forte.</p>
                        <p>E adesso, ti arriva una nuova prova.</p>
                        <p>Dopo mesi di lavoro e impegno, VASTA ti chiede di trasferirti per 2 anni in Guinea, per supervisionare la costruzione di un'importante diga.</p>
                        <p>È il momento di mettere in pratica tutto ciò che hai imparato. La sfida è grande, ma la voglia di farcela è più forte che mai.</p>
                    `,
                    choices: [
                        { text: "Sei molto entusiasta dell'opportunità e accetti immediatamente la proposta", target: "ArrivoABafata", etica: 0 },
                        { text: "Sorgono i primi dubbi, ma dopo un periodo di riflessione decidi di accettare", target: "ArrivoABafata", etica: 0 }
                    ]
                },
                "ArrivoABafata": {
                    content: `
                        <p>Arrivi a Bafatà. La città è un miscuglio di modernità e povertà, e il contrasto si nota subito. Ti sistemano in un appartamento moderno, ma la vista sulle baraccopoli ti fa capire subito che questo è solo un lato della realtà.</p>
                        <p>In ufficio, ti accorgi rapidamente che VASTA è focalizzata sui risultati. Il tuo incarico è chiaro: portare avanti il progetto idraulico.</p>
                    `,
                    choices: [
                        { text: "Non mi interessa dove sono, l'azienda mi ha dato un obiettivo chiaro da rispettare", target: "IncontroMaya", etica: 0 },
                        { text: "Percepisco la disparità, ma ho altri problemi a cui pensare", target: "IncontroMaya", etica: 0.5 },
                        { text: "Questo contrasto mi rattrista e mi piacerebbe far qualcosa per aiutare", target: "IncontroMaya", etica: 1 }
                    ]
                },
                "IncontroMaya": {
                    content: `
                        <p>Mentre stai entrando nel cantiere, una donna ti si para davanti. Ha gli abiti impolverati e lo sguardo deciso. Ti ferma con fermezza e ti chiede di ascoltarla. È Maya, una residente della zona.</p>
                        <p>Con voce tesa e un inglese difficile da capire, ti racconta di come la sua comunità sia stata cacciata da quelle terre senza preavviso per far spazio alla miniera.</p>
                        <p>"Mia madre viveva su quelle terre," ti dice, fissandoti negli occhi. "Hanno distrutto le nostre case. Ci hanno mandato via senza spiegazioni. Tu pensi davvero che questo sia giusto?"</p>
                    `,
                    choices: [
                        { text: "Ti fermi ad ascoltarla e vuoi capire meglio cosa sia successo", target: "ParlaConRuiz", etica: 0.5 },
                        { text: "Eviti il confronto e vai diretto a lavorare", target: "ParlaConRuiz", etica: 0 }
                    ]
                },
                "ParlaConRuiz": {
                    content: `
                        <p>Quella sera, le parole di Maya continuano a girarti in testa. Non riesci a scrollartele di dosso. Il giorno dopo, durante una pausa, decidi di parlarne con il tuo responsabile diretto, Ingegnere Ruiz, un uomo esperto inviato dalla sede centrale di Madrid.</p>
                        <p>Gli racconti dell'incontro con la donna e di ciò che ti ha detto. Ruiz sorride, quasi con sufficienza.</p>
                        <p>"Ah, quella? Maya è la matta del villaggio. È da anni che si lamenta con chiunque arrivi qui. Inventano storie per screditare il progetto. Non darle retta, fidati. Noi stiamo facendo tutto in regola."</p>
                        <p>Ti squadra, come a mettere fine alla conversazione, poi si allontana per rispondere a una telefonata.</p>
                    `,
                    choices: [
                        { text: "Ti fidi e non fai ulteriori domande", target: "AnalisiDiFattibilita", etica: 0 },
                        { text: "La storia non ti convince e decidi di andare avanti ad indagare", target: "CercaMaya", etica: 1 }
                    ]
                },
                "CercaMaya": {
                    content: `
                        <p>Una sera, dopo il lavoro, decidi di tornare nel villaggio per cercare Maya. La ritrovi vicino e ti accoglie senza rancore. Con calma, ti racconta di nuovo la storia della sua comunità — ma questa volta, i dettagli sono tanti e troppo specifici per essere inventati: date, nomi, documenti mostrati, foto sbiadite di case distrutte e campi coltivati abbandonati.</p>
                        <p>Parla di promesse mai mantenute e di funzionari corrotti.</p>
                        <p>Ascoltandola, inizi a sentirti sempre più coinvolto. Quelle storie non sono più solo voci. C'è qualcosa che non torna. Senti che devi capire la verità.</p>
                        <p>Ora hai due possibilità:</p>
                    `,
                    choices: [
                        { text: "Chiedi al tuo responsabile di farti chiarezza — Lo affronti direttamente", target: "ConfrontoConRuiz", etica: 1 },
                        { text: "Chiedi ai lavoratori locali della diga cosa è successo", target: "ParlaConLavoratori", etica: 0.5 }
                    ]
                },
                "ConfrontoConRuiz": {
                    content: `
                        <p>Il mattino seguente, entri nel suo ufficio. L'aria è pesante e il ventilatore cigola sul soffitto. Con tono misurato, gli racconti dell'incontro con Maya e delle informazioni che ti ha mostrato. Gli chiedi chiarimenti, vuoi capire cosa è realmente successo su quei terreni.</p>
                        <p>Lui non ti lascia nemmeno finire. Si irrigidisce sulla sedia, incrocia le braccia e ti fissa con uno sguardo freddo.</p>
                        <p>"Te l'ho già detto. Quella donna è una piantagrane da anni. Sono storie vecchie. Non voglio che tu perda tempo dietro a queste sciocchezze."</p>
                        <p>Si sporge in avanti, abbassando la voce ma con tono severo.</p>
                        <p>"Qui sei stato assunto per lavorare, non per indagare. Se continui a mettere il naso dove non devi, la prossima volta non discuteremo più: ti rispedisco a casa, chiaro?"</p>
                        <p>Il messaggio è chiaro. Non solo non vuole parlarne, ma ti ha praticamente minacciato. Qualcosa sotto c'è. E non è pulito.</p>
                    `,
                    choices: [
                        { text: "La situazione è troppo pesante. Decidi di licenziarti e denunciare quello che hai scoperto.", target: "FinalePositivo", etica: 1 },
                        { text: "Continui con il lavoro. Cerchi di non fare troppe domande e portare a termine il progetto.", target: "AnalisiDiFattibilita", etica: 0 }
                    ]
                },
                "ParlaConLavoratori": {
                    content: `
                        <p>Decidi di parlare con i lavoratori locali.</p>
                        <p>Aspetti la fine del turno, quando i rumori della miniera si affievoliscono e gli operai si raccolgono all'ombra di un vecchio capanno.</p>
                        <p>Con discrezione, ti avvicini a Bakary, un uomo sulla quarantina con le mani consumate e lo sguardo basso. All'inizio è diffidente, ma quando gli parli della storia di Maya, i suoi occhi si alzano lentamente.</p>
                        <p>"È tutto vero," ti sussurra. "Hanno preso le terre. Hanno promesso compensazioni… ma non è arrivato niente. Chi ha protestato è sparito o è stato picchiato. Noi lavoriamo qui perché non abbiamo scelta. Ma non pensare che siamo felici."</p>
                        <p>Altri lavoratori, sentendo la conversazione, si avvicinano e confermano.</p>
                        <p>Le parole di Maya trovano conferme, e i tuoi dubbi si moltiplicano.</p>
                    `,
                    choices: [
                        { text: "Chiedi al tuo responsabile di farti chiarezza — Lo affronti direttamente", target: "ConfrontoConRuiz", etica: 1 },
                        { text: "Forse è meglio non fare domande. Decidi di continuare con il lavoro.", target: "AnalisiDiFattibilita", etica: 0 }
                    ]
                },
                "AnalisiDiFattibilita": {
                    content: `
                        <p>Passano alcune settimane. Il lavoro procede, ma la pressione aumenta. Un pomeriggio, mentre stai archiviando i documenti, il tuo responsabile ti chiama nel suo ufficio.</p>
                        <p>Ti chiede di preparare un'analisi di fattibilità per una possibile miglioria dell'impianto: l'obiettivo è capire se si può aumentare la capacità della diga ampliando alcune strutture.</p>
                        <p>Sembra un compito semplice, ma sai già che potrebbe richiedere tempo e attenzione.</p>
                        <p>Ora devi decidere come gestirlo.</p>
                    `,
                    choices: [
                        { text: "Te ne occupi personalmente — Vuoi seguire tu stesso l'analisi", target: "RisultatiAnalisi", etica: 1 },
                        { text: "Lo deleghi a un collega — Affidi il compito a un altro ingegnere", target: "RisultatiAnalisi", etica: 0 }
                    ]
                },
                "RisultatiAnalisi": {
                    content: `
                        <p>Dopo giorni di lavoro, il report è pronto:
                        emergono gravi criticità legate alla stabilità dell'impianto.
                        L'aumento di capacità non è fattibile senza rischi strutturali rilevanti.</p>
                        <p>Consegnate il report al responsabile.
                        Dopo averlo letto, lui lo poggia lentamente sulla scrivania e ti fissa, freddo.</p>
                        <p>"Alex, questo documento non va bene. Se lo mandiamo così, il progetto si blocca e qui ci rimettiamo tutti. Rivedilo. Togli quelle parti. Non voglio più leggere la parola 'instabilità'. Fallo sembrare fattibile, chiaro?"</p>
                        <p>Ti sta ordinando di falsificare il report per nascondere problemi tecnici potenzialmente pericolosi.</p>
                    `,
                    choices: [
                        { text: "Ti rifiuti — Mantieni il report originale", target: "ConsequenzeRifiuto", etica: 1 },
                        { text: "Modifichi il report — Cancelli le parti critiche", target: "ConsequenzeModifica", etica: 0 }
                    ]
                },
                "ConsequenzeRifiuto": {
                    content: `
                        <p>Scegli di rifiutarti.</p>
                        <p>Il tuo capo si irrigidisce, ti fissa freddamente e alza il tono:
                        "Non mi interessa, trova una soluzione fattibile. Questo progetto deve andare avanti. Non mi presentare mai più un report così."</p>
                        <p>Sei sotto pressione. Sai che i problemi sono seri, ma ora ti viene chiesto di aggirare un ostacolo insormontabile senza più sollevare obiezioni.</p>
                    `,
                    choices: [
                        { text: "Non te la senti di dare soluzione realmente realizzabile", target: "DemansionamentoEFinale", etica: 1 },
                        { text: "Decidi di trovare soluzioni di cui non sei sicuro dell'efficacia", target: "FinaleIntermedio", etica: 0 }
                    ]
                },
                "DemansionamentoEFinale": {
                    content: `
                        <p>Pochi giorni dopo, senza preavviso, vieni sollevato dall'incarico.</p>
                        <p>Ti trasferiscono in un reparto meno prestigioso, lontano dai progetti importanti.</p>
                        <p>I tuoi compiti diventano banali e privi di significato.</p>
                        <p>Il tuo nome non appare più nelle riunioni decisionali e ti ritrovi a fare lavoro di routine per i restanti mesi, lontano dalla visibilità che avevi prima.</p>
                    `,
                    choices: [
                        { text: "Avanti", target: "FinaleIntermedio", etica: 0 }
                    ]
                },
                "ConsequenzeModifica": {
                    content: `
                        <p>Decidi di modificare il report come ti ha chiesto il tuo capo.</p>
                        <p>Quando gli invii il documento aggiornato, lui sembra molto soddisfatto. Il suo sorriso è ampio, come se avesse appena ricevuto una grande vittoria.</p>
                        <p>"Perfetto. Finalmente qualcosa che funziona," ti dice con tono approvante.</p>
                        <p>"Questo progetto porterà milioni. Grazie a te, l'azienda crescerà a dismisura. Ti assicuro che il tuo futuro qui sarà roseo."</p>
                        <p>Il tuo capo sembra sinceramente entusiasta dei risultati, e il tuo nome inizia a circolare nei corridoi come qualcuno che ha contribuito al successo.</p>
                        <p>La pressione però non diminuisce. Ogni passo che fai sembra essere sempre più intriso di compromessi morali, ma il beneficio personale ti spinge a ignorarli.</p>
                    `,
                    choices: [
                        { text: "Continua", target: "FinaleCattivo", etica: 0 }
                    ]
                },
                "FinalePositivo": {
                    checkEtica: true,
                    threshold: 3,
                    ifTrue: "FinalePositivoVero",
                    ifFalse: "FinaleIntermedio"
                },
                "FinalePositivoVero": {
                    content: `
                        <h2 class="finale-positivo">Un finale responsabile</h2>
                        <p>Grazie per aver giocato, le tue scelte non sono scontate e nessuno le ha seguite per la costruzione del bacino a Stava negli anni.</p>
                        <p>La responsabilità che hai dimostrato ti ha permesso di evitare una tragedia e salvare centinaia di vite.</p>
                        <p>Ti consigliamo di rigiocare per vedere ciò che è successo a Stava tra il 1961 e il 1985.</p>
                    `,
                    choices: [
                        { text: "Ricomincia", target: "Inizio", reset: true }
                    ]
                },
                "FinaleIntermedio": {
                    content: `
                        <h2 class="finale-intermedio">Un finale di compromesso</h2>
                        <p>Due anni dopo, la diga crolla.</p>
                        <p>Il disastro è enorme: villaggi sommersi, 300 vittime, migliaia di sfollati.</p>
                        <p>Le indagini dimostrano che la diga non doveva essere costruita: il terreno era instabile, i rischi noti fin dall'inizio.</p>
                        <p>Tu non vieni accusato di nulla. Formalmente, non hai falsificato documenti né preso decisioni decisive.</p>
                        <p>Eppure lo sai bene.</p>
                        <p>Sapevi che c'erano problemi.<br>
                        Sapevi che qualcosa non tornava.<br>
                        Hai abbassato la testa, hai evitato domande, hai lasciato correre.</p>
                        <p>Hai messo anche tu un piccolo sassolino sulla montagna di silenzi e compromessi che ha portato qui.</p>
                        <p>Non sei colpevole.<br>
                        Ma non sei innocente.<br>
                        E questa consapevolezza non ti lascerà mai.</p>
                    `,
                    choices: [
                        { text: "Ricomincia", target: "Inizio", reset: true }
                    ]
                },
                "FinaleCattivo": {
                    content: `
                        <h2 class="finale-cattivo">Un finale tragico</h2>
                        <p>Due anni dopo, la diga crolla.</p>
                        <p>Un cedimento improvviso, devastante.</p>
                        <p>Le acque travolgono villaggi, campi e strade. Trecento persone muoiono. Famiglie intere spazzate via, vite cancellate in pochi minuti.</p>
                        <p>Le indagini rivelano quello che già sapevi.</p>
                        <p>I problemi di stabilità c'erano, erano stati segnalati. Ma il report ufficiale, anche quello che hai contribuito a modificare, li aveva nascosti.</p>
                        <p>Le scelte fatte, anche per colpa tua, hanno avuto conseguenze disastrose.</p>
                        <p>Nei mesi successivi la stampa internazionale parla di negligenza, corruzione e responsabilità condivise.</p>
                        <p>Finisci sotto processo, la verità ti pesa addosso.</p>
                        <p>Ogni volta che ripensi a quei giorni, sai che hai avuto l'occasione di fermare tutto. E non l'hai fatto.</p>
                    `,
                    choices: [
                        { text: "Ricomincia", target: "Inizio", reset: true }
                    ]
                }
            }
        };

        // Variabile per tracciare il punteggio etico (nascosto all'utente)
        let etica = 0;
        
        // Elementi DOM principali
        const passageContent = document.getElementById('passage-content');
        const choicesContainer = document.getElementById('choices-container');
        
        // Funzione per mostrare un passaggio
        function showPassage(passageName) {
            // Ottieni il passaggio
            const passage = story.passages[passageName];
            
            // Gestisci il controllo condizionale dell'etica
            if (passage.checkEtica) {
                if (etica >= passage.threshold) {
                    showPassage(passage.ifTrue);
                } else {
                    showPassage(passage.ifFalse);
                }
                return;
            }
            
            // Aggiorna il contenuto del passaggio
            passageContent.innerHTML = passage.content;
            
            // Crea i pulsanti delle scelte
            choicesContainer.innerHTML = '';
            if (passage.choices) {
                passage.choices.forEach(choice => {
                    const button = document.createElement('button');
                    button.className = 'choice-button';
                    button.textContent = choice.text;
                    
                    button.addEventListener('click', () => {
                        // Aggiungi etica se definita
                        if (typeof choice.etica !== 'undefined') {
                            etica += choice.etica;
                        }
                        
                        // Reset etica se richiesto
                        if (choice.reset) {
                            etica = 0;
                        }
                        
                        // Effetto di transizione
                        passageContent.classList.remove('passage-visible');
                        
                        // Ritardo per l'animazione
                        setTimeout(() => {
                            showPassage(choice.target);
                            passageContent.classList.add('passage-visible');
                        }, 300);
                    });
                    
                    choicesContainer.appendChild(button);
                });
            }
            
            // Aggiungi classe per l'animazione
            setTimeout(() => {
                passageContent.classList.add('passage-visible');
            }, 50);
        }
        
        // Inizia il gioco con il primo passaggio
        window.onload = function() {
            passageContent.classList.remove('passage-visible');
            showPassage("Inizio");
        };
    </script>
</body>
</html>